rm -rf *.ucdb;

seq=( WRITE_TO_ALL_REG READ_DEFAULT_VALUE ADDRESS_NACK TRANSMIT_1_DATA WRITE_FULL_TX_FIFO DATA_NACK WRITE_THEN_RESET WRITE_WITH_SR WRITE_MANY_DATA READ_1_DATA READ_TO_FIFORX_EMPTY READ_RESET_VALUE RESET_STATE )
for seq_ins in "${seq[@]}"
do
    echo "Running $seq_ins"

    rm -rf work; 
    vlib work; 

    UVM_FLAGS=+incdir+${UVM_HOME}/src ${UVM_HOME}/src/uvm_pkg.sv

    vlog -timescale=1ns/1ns -sv +acc ${UVM_FLAGS} -incr -f filelist_tb.f -assertdebug +define+SEQ_TEST=$seq_ins -l vlog_tb.log;
    vlog -sv +acc -incr -f filelist_rtl.f -l vlog_rtl.log +cover=sbceft -assertdebug;
    vsim -voptargs=+acc -sva -assertdebug -coverage top_sim -c -do "set WildcardFilter None;add wave -r top_sim/*; coverage save -onexit $seq_ins.ucdb; run -all; quit;"
done
vcover merge final_coverage.ucdb  *.ucdb;

